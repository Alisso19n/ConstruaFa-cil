<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Painel Administrativo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    :root{ --brand:#2c7be5; --brand2:#3498db; --danger:#e74c3c; --ink:#233142; --bg:#f3f8fe; --line:#e8eef7; --ok:#27ae60 }
    *{box-sizing:border-box}
    body{ font-family:Segoe UI, Arial, sans-serif; margin:0; background:var(--bg); color:var(--ink) }
    .wrap{ max-width:1100px; margin:20px auto; padding:0 12px }
    h1{ color:var(--brand2); margin:0 0 10px }
    .toolbar{ display:flex; gap:10px; flex-wrap:wrap; margin:12px 0 18px }
    .btn{ padding:10px 14px; border-radius:10px; border:1px solid var(--line); background:#fff; cursor:pointer; text-decoration:none; color:var(--ink); font-weight:600 }
    .btn.primary{ background:var(--brand2); border-color:var(--brand2); color:#fff }
    .btn.alt{ background:#fff; border-color:var(--brand2); color:var(--brand2) }
    .btn.ok{ background:var(--ok); border-color:var(--ok); color:#fff }
    .btn.warn{ background:#ffb020; border-color:#ffb020; color:#1b1b1b }
    .btn.danger{ background:var(--danger); border-color:var(--danger); color:#fff }
    .btn.sm{ padding:8px 12px }
    .tabs{ display:flex; gap:8px; flex-wrap:wrap; margin-bottom:10px }
    .tab{ padding:8px 12px; border-radius:999px; background:#fff; border:1px solid var(--line); color:#355c8a; text-decoration:none }
    .grid{ display:grid; gap:14px; grid-template-columns:1fr }
    .card{ background:#fff; border:1px solid var(--line); border-radius:12px; padding:14px }
    h3{ margin:0 0 10px; color:#245b8a }
    table{ width:100%; border-collapse:collapse; table-layout:fixed }
    th,td{ padding:10px; border-bottom:1px solid var(--line); text-align:left; vertical-align:top }
    th{ background:#eaf4ff; color:#245b8a }
    .badge{ display:inline-block; padding:4px 8px; border-radius:999px; font-size:.82rem; background:#eef6ff; border:1px solid #dfefff }
    .actions{ display:flex; gap:8px; flex-wrap:wrap }
    .pager{ display:flex; justify-content:center; gap:8px; margin:12px 0 0 }
    .pager a, .pager .badge{ padding:6px 10px; border:1px solid var(--line); border-radius:8px; text-decoration:none; color:#233142; background:#fff }
    .pager a.disabled{ pointer-events:none; opacity:.45 }
    .sizes{ display:flex; gap:6px; align-items:center; font-size:.92rem; color:#355c8a; margin-top:8px }
    .sizes input{ width:60px; padding:6px 8px; border:1px solid #d7e7fb; border-radius:8px }
    @media (max-width:800px){ .actions{ gap:6px } .btn.sm{ padding:6px 10px } }
  </style>
</head>
<body>
<div class="wrap">
  <h1>Painel Administrativo</h1>

  <div class="toolbar">
    <a class="btn" th:href="@{/}">üè† In√≠cio</a>
    <a class="btn" th:href="@{/login}">üîê Login</a>
    <a class="btn" th:href="@{/logout}">üö™ Sair</a>
  </div>

  <div class="tabs">
    <a href="#profissionais" class="tab">Profissionais</a>
    <a href="#clientes" class="tab">Clientes</a>
    <a href="#solicitacoes" class="tab">Solicita√ß√µes</a>
  </div>

  <div class="grid">

    <!-- =================== PROFISSIONAIS =================== -->
    <div class="card" id="profissionais">
      <h3>Profissionais</h3>
      <table>
        <thead>
        <tr>
          <th>Nome</th>
          <th>E-mail</th>
          <th>Telefone</th>
          <th>Profiss√£o</th>
          <th>Status</th>
          <th style="width:320px;">A√ß√µes</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="p : ${profissionaisPage.content}">
          <td th:text="${p.nome}">Nome</td>
          <td th:text="${p.email}">email</td>
          <td th:text="${p.telefone}">tel</td>
          <td th:text="${p.profissao}">profissao</td>
          <td><span class="badge" th:text="${p.status}">INATIVO</span></td>
          <td class="actions">
            <form th:if="${p.status != null && !#strings.equalsIgnoreCase(p.status,'ATIVO')}"
                  th:action="@{|/admin/aprovar-profissional/${p.id}|}" method="post">
              <input type="hidden" name="pageP" th:value="${profissionaisPage.number}" />
              <input type="hidden" name="sizeP" th:value="${sizeP}" />
              <button class="btn sm ok" type="submit">Aprovar</button>
            </form>
            <a class="btn sm alt" th:href="@{|/admin/editar-profissional/${p.id}|}">Editar</a>
            <form th:action="@{|/admin/recusar-profissional/${p.id}|}" method="post"
                  onsubmit="return confirm('Recusar este cadastro? Isso remover√° o profissional e suas solicita√ß√µes.');">
              <input type="hidden" name="pageP" th:value="${profissionaisPage.number}" />
              <input type="hidden" name="sizeP" th:value="${sizeP}" />
              <button class="btn sm warn" type="submit">Recusar</button>
            </form>
            <form th:action="@{|/admin/excluir-profissional/${p.id}|}" method="post"
                  onsubmit="return confirm('Excluir definitivamente? Esta a√ß√£o √© irrevers√≠vel.');">
              <input type="hidden" name="pageP" th:value="${profissionaisPage.number}" />
              <input type="hidden" name="sizeP" th:value="${sizeP}" />
              <button class="btn sm danger" type="submit">Excluir</button>
            </form>
          </td>
        </tr>
        <tr th:if="${#lists.isEmpty(profissionaisPage.content)}">
          <td colspan="6" style="text-align:center">Nenhum profissional encontrado.</td>
        </tr>
        </tbody>
      </table>

      <div class="sizes">
        Itens por p√°gina:
        <form th:action="@{/admin/painel}" method="get">
          <input type="hidden" name="pageC" th:value="${0}" />
          <input type="hidden" name="sizeC" th:value="${sizeC}" />
          <input type="hidden" name="pageS" th:value="${0}" />
          <input type="hidden" name="sizeS" th:value="${sizeS}" />
          <input type="number" name="sizeP" th:value="${sizeP}" min="1" max="50" />
          <button class="btn sm alt" type="submit">Aplicar</button>
        </form>
      </div>

      <nav class="pager" th:if="${profissionaisPage.totalPages > 1}">
        <a th:classappend="${profissionaisPage.first} ? 'disabled'"
           th:href="@{/admin/painel(pageP=${profissionaisPage.number-1},sizeP=${sizeP},pageC=${0},sizeC=${sizeC},pageS=${0},sizeS=${sizeS})}#profissionais">¬´ Anterior</a>
        <span class="badge">P√°gina <b th:text="${profissionaisPage.number+1}">1</b> de <b th:text="${profissionaisPage.totalPages}">1</b></span>
        <a th:classappend="${profissionaisPage.last} ? 'disabled'"
           th:href="@{/admin/painel(pageP=${profissionaisPage.number+1},sizeP=${sizeP},pageC=${0},sizeC=${sizeC},pageS=${0},sizeS=${sizeS})}#profissionais">Pr√≥ximo ¬ª</a>
      </nav>
    </div>

    <!-- =================== CLIENTES =================== -->
    <div class="card" id="clientes">
      <h3>Clientes</h3>
      <table>
        <thead>
        <tr>
          <th>Nome</th>
          <th>E-mail</th>
          <th>Telefone</th>
          <th>Status</th>
          <th style="width:280px;">A√ß√µes</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="c : ${clientesPage.content}">
          <td th:text="${c.nome}">Nome</td>
          <td th:text="${c.email}">email</td>
          <td th:text="${c.telefone}">tel</td>
          <td><span class="badge" th:text="${c.status}">ATIVO</span></td>
          <td class="actions">
            <form th:if="${c.status != null && !#strings.equalsIgnoreCase(c.status,'ATIVO')}"
                  th:action="@{|/admin/aprovar-cliente/${c.id}|}" method="post">
              <input type="hidden" name="pageC" th:value="${clientesPage.number}" />
              <input type="hidden" name="sizeC" th:value="${sizeC}" />
              <button class="btn sm ok" type="submit">Aprovar</button>
            </form>
            <a class="btn sm alt" th:href="@{|/admin/editar-cliente/${c.id}|}">Editar</a>
            <form th:action="@{|/admin/recusar-cliente/${c.id}|}" method="post"
                  onsubmit="return confirm('Recusar este cadastro? Isso remover√° o cliente e suas solicita√ß√µes.');">
              <input type="hidden" name="pageC" th:value="${clientesPage.number}" />
              <input type="hidden" name="sizeC" th:value="${sizeC}" />
              <button class="btn sm warn" type="submit">Recusar</button>
            </form>
            <form th:action="@{|/admin/excluir-cliente/${c.id}|}" method="post"
                  onsubmit="return confirm('Excluir definitivamente? Esta a√ß√£o √© irrevers√≠vel.');">
              <input type="hidden" name="pageC" th:value="${clientesPage.number}" />
              <input type="hidden" name="sizeC" th:value="${sizeC}" />
              <button class="btn sm danger" type="submit">Excluir</button>
            </form>
          </td>
        </tr>
        <tr th:if="${#lists.isEmpty(clientesPage.content)}">
          <td colspan="5" style="text-align:center">Nenhum cliente encontrado.</td>
        </tr>
        </tbody>
      </table>

      <div class="sizes">
        Itens por p√°gina:
        <form th:action="@{/admin/painel}" method="get">
          <input type="hidden" name="pageP" th:value="${0}" />
          <input type="hidden" name="sizeP" th:value="${sizeP}" />
          <input type="hidden" name="pageS" th:value="${0}" />
          <input type="hidden" name="sizeS" th:value="${sizeS}" />
          <input type="number" name="sizeC" th:value="${sizeC}" min="1" max="50" />
          <button class="btn sm alt" type="submit">Aplicar</button>
        </form>
      </div>

      <nav class="pager" th:if="${clientesPage.totalPages > 1}">
        <a th:classappend="${clientesPage.first} ? 'disabled'"
           th:href="@{/admin/painel(pageC=${clientesPage.number-1},sizeC=${sizeC},pageP=${0},sizeP=${sizeP},pageS=${0},sizeS=${sizeS})}#clientes">¬´ Anterior</a>
        <span class="badge">P√°gina <b th:text="${clientesPage.number+1}">1</b> de <b th:text="${clientesPage.totalPages}">1</b></span>
        <a th:classappend="${clientesPage.last} ? 'disabled'"
           th:href="@{/admin/painel(pageC=${clientesPage.number+1},sizeC=${sizeC},pageP=${0},sizeP=${sizeP},pageS=${0},sizeS=${sizeS})}#clientes">Pr√≥ximo ¬ª</a>
      </nav>
    </div>

    <!-- =================== SOLICITA√á√ïES =================== -->
    <div class="card" id="solicitacoes">
      <h3>Solicita√ß√µes</h3>
      <table>
        <thead>
        <tr>
          <th>ID</th>
          <th>Cliente</th>
          <th>Profissional</th>
          <th>Descri√ß√£o</th>
          <th>Data</th>
          <th>Status</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="s : ${solicitacoesPage.content}">
          <td th:text="${s.id}">1</td>
          <td th:text="${s.cliente != null ? s.cliente.nome : '-'}">Cliente</td>
          <td th:text="${s.profissional != null ? s.profissional.nome : '-'}">Profissional</td>
          <td th:text="${s.descricao}">Desc</td>
          <td th:text="${#temporals.format(s.dataSolicitacao,'dd/MM/yyyy HH:mm')}">01/01/2025</td>
          <td><span class="badge" th:text="${s.status}">PENDENTE</span></td>
        </tr>
        <tr th:if="${#lists.isEmpty(solicitacoesPage.content)}">
          <td colspan="6" style="text-align:center">Nenhuma solicita√ß√£o encontrada.</td>
        </tr>
        </tbody>
      </table>

      <div class="sizes">
        Itens por p√°gina:
        <form th:action="@{/admin/painel}" method="get">
          <input type="hidden" name="pageP" th:value="${0}" />
          <input type="hidden" name="sizeP" th:value="${sizeP}" />
          <input type="hidden" name="pageC" th:value="${0}" />
          <input type="hidden" name="sizeC" th:value="${sizeC}" />
          <input type="number" name="sizeS" th:value="${sizeS}" min="1" max="50" />
          <button class="btn sm alt" type="submit">Aplicar</button>
        </form>
      </div>

      <nav class="pager" th:if="${solicitacoesPage.totalPages > 1}">
        <a th:classappend="${solicitacoesPage.first} ? 'disabled'"
           th:href="@{/admin/painel(pageS=${solicitacoesPage.number-1},sizeS=${sizeS},pageP=${0},sizeP=${sizeP},pageC=${0},sizeC=${sizeC})}#solicitacoes">¬´ Anterior</a>
        <span class="badge">P√°gina <b th:text="${solicitacoesPage.number+1}">1</b> de <b th:text="${solicitacoesPage.totalPages}">1</b></span>
        <a th:classappend="${solicitacoesPage.last} ? 'disabled'"
           th:href="@{/admin/painel(pageS=${solicitacoesPage.number+1},sizeS=${sizeS},pageP=${0},sizeP=${sizeP},pageC=${0},sizeC=${sizeC})}#solicitacoes">Pr√≥ximo ¬ª</a>
      </nav>
    </div>

  </div>
</div>
</body>
</html>
